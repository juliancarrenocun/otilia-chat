<!doctype html>
<html lang="es" dir="ltr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Julia â€“ Asistente de PrÃ¡cticas CUN</title>

  <!-- META -->
  <meta name="description" content="Tu abuelita digital para resolver dudas sobre SGP, ARL, documentos y seguimiento de prÃ¡cticas en la CUN." />
  <meta name="theme-color" content="#0B0C0F" />

  <!-- Open Graph -->
  <meta property="og:title" content="Julia â€“ Asistente de PrÃ¡cticas CUN" />
  <meta property="og:description" content="Resuelve tus dudas de prÃ¡cticas: SGP, ARL, documentos, seguimiento y cierre." />
  <meta property="og:image" content="assets/web-app-manifest-512x512.png" />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://juliancarrenocun.github.io/otilia-chat/" />

  <!-- Performance (chat) -->
  <link rel="preconnect" href="https://www.chatbase.co" crossorigin>

  <!-- Icons & PWA -->
  <link rel="icon" type="image/x-icon" href="assets/favicon.ico" />
  <link rel="icon" type="image/png" sizes="96x96" href="assets/favicon-96x96.png" />
  <link rel="apple-touch-icon" sizes="180x180" href="assets/apple-touch-icon.png" />
  <link rel="icon" type="image/png" sizes="192x192" href="assets/web-app-manifest-192x192.png" />
  <link rel="icon" type="image/png" sizes="512x512" href="assets/web-app-manifest-512x512.png" />
  <link rel="manifest" href="assets/site.webmanifest" />

  <style>
    :root{
      /* Paleta naranja-negro-blanco */
      --bg:#0B0C0F;              /* fondo base */
      --bg-2:#0E1014;            /* fondo secciones */
      --ink:#F5F7FA;             /* texto principal */
      --muted:#B8C0CC;           /* texto secundario */
      --orange:#FF8F00;          /* acento */
      --orange-2:#FFA733;        /* hover/acento claro */
      --card:#0E1116CC;          /* semi-glass (rgba) */
      --card-br:#1F2430;         /* borde cards */
      --white:#FFFFFF;
      --radius:16px;
      --shadow:0 10px 30px rgba(0,0,0,.35);
      --link:#F1F4F8;
    }

    *{box-sizing:border-box}
    html,body{margin:0}
    body{
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Noto Sans", "Liberation Sans", sans-serif;
      background: var(--bg);
      color: var(--ink);
      -webkit-font-smoothing:antialiased;
      text-rendering:optimizeLegibility;
      line-height:1.5;
    }

    /* TOPBAR sutil con logo */
    .topbar{
      display:flex; align-items:center; justify-content:space-between;
      gap:12px; padding:10px 20px; border-bottom:1px solid var(--card-br);
      background: linear-gradient(90deg,#0B0C0F 0%, #121318 100%);
    }
    .brand-mini{display:flex; align-items:center; gap:10px}
    .brand-mini img{width:28px;height:28px;border-radius:4px;opacity:.95}
    .brand-mini strong{font-size:14px;color:#E6EAF2}

    /* HERO con lÃ­neas tecnolÃ³gicas y orbes */
    .hero{
      position:relative; overflow:hidden; color:#fff;
      padding: clamp(28px, 6vw, 84px) 24px;
      background:
        radial-gradient(1400px 700px at 85% -10%, rgba(255,143,0,.22), transparent 60%),
        radial-gradient(900px 480px at 0% 100%, rgba(255,143,0,.14), transparent 60%),
        #0B0C0F;
    }
    /* textura de circuitos (lÃ­neas visibles) */
    .hero::before{
      content:""; position:absolute; inset:0;
      background-image:
        repeating-linear-gradient(  20deg, rgba(255,255,255,.06) 0 1px, transparent 1px 32px),
        repeating-linear-gradient( 110deg, rgba(255,255,255,.05) 0 1px, transparent 1px 36px);
      mask-image: radial-gradient(1200px 600px at 60% 0%, #000 45%, transparent 80%);
      pointer-events:none;
    }

    .container{max-width:1120px;margin:0 auto}

    .hero-grid{ display:grid; gap:24px; align-items:center; grid-template-columns: 1.1fr .9fr; }
    @media (max-width:880px){ .hero-grid{ grid-template-columns:1fr; text-align:center } }

    .kicker{
      display:inline-flex;align-items:center;gap:8px;
      padding:6px 10px;border-radius:999px;
      background: rgba(255,143,0,.12); border:1px solid rgba(255,143,0,.35);
      font-size:12px; letter-spacing:.2px;
    }
    .hero h1{
      margin:12px 0 6px; font-size: clamp(28px, 4vw, 48px); font-weight:800; letter-spacing:.2px;
    }
    .hero p{ margin:0; color:#E9EEF7; max-width:56ch }
    .micro{ margin-top:8px; font-size:14px; color:#FFDDB1; opacity:.95; min-height:22px }

    .cta-row{ display:flex; gap:12px; flex-wrap:wrap; margin-top:18px }
    .btn{
      appearance:none; border:0; cursor:pointer; text-decoration:none;
      display:inline-flex; align-items:center; gap:10px;
      padding:12px 18px; border-radius:12px; font-weight:700;
      color:#0B0C0F; background: var(--orange);
      box-shadow: 0 0 0 rgba(255,143,0,0);
      transition: transform .08s ease, box-shadow .2s ease, background .2s ease, filter .2s ease;
    }
    .btn:hover{ transform:translateY(-1px); background:var(--orange-2); box-shadow:0 0 24px rgba(255,143,0,.45); filter:saturate(110%) }
    .btn-ghost{
      background: transparent; color:#fff; border:1.6px solid rgba(255,255,255,.35);
    }
    .btn-ghost:hover{ border-color:#fff; background:rgba(255,255,255,.08) }

    /* Hero figura flotante con glow orbital */
    .hero-figure{ justify-self:center; position:relative; filter: drop-shadow(0 22px 44px rgba(255,143,0,.22)); animation:float 6s ease-in-out infinite; }
    .hero-figure img{
      width:min(380px, 62vw); height:auto; border-radius:50%;
      background: radial-gradient(80% 80% at 50% 30%, rgba(255,170,80,.28), transparent 60%);
      border: 3px solid rgba(255,255,255,.1);
      box-shadow: 0 0 0 8px rgba(255,255,255,.06), 0 0 60px rgba(255,143,0,.2) inset;
    }
    @keyframes float{ 0%,100%{transform:translateY(0)} 50%{transform:translateY(-8px)} }

    /* ENLACES: no azules + subrayado animado */
    a{ color: var(--link); text-decoration:none; position:relative }
    a::after{
      content:""; position:absolute; left:0; bottom:-2px; height:2px; width:0%;
      background: linear-gradient(90deg, var(--orange), var(--orange-2));
      transition: width .25s ease;
    }
    a:hover::after{ width:100% }

    /* MAIN */
    main{ padding:40px 24px; background:linear-gradient(#0B0C0F,#0E1115) }
    .grid{ display:grid; gap:16px }
    @media (min-width:920px){ .grid{ grid-template-columns:1.2fr .8fr } }

    /* Cards semi-glass */
    .card{
      background: var(--card);
      -webkit-backdrop-filter: blur(6px);
      backdrop-filter: blur(6px);
      border:1px solid var(--card-br);
      border-radius: var(--radius);
      padding:24px; box-shadow: var(--shadow);
      transition: transform .12s ease, box-shadow .2s ease, border-color .2s ease, background .2s ease;
    }
    .card:hover{
      transform: translateY(-2px);
      box-shadow: 0 14px 40px rgba(255,143,0,.15);
      border-color: rgba(255,143,0,.38);
      background: linear-gradient(180deg, rgba(255,143,0,.06), transparent 60%), var(--card);
    }
    h2{ margin:0 0 12px; font-size: clamp(20px,2.4vw,28px); color:#FFD9A3 }
    ul{ margin:0; padding-left:18px }
    li{ margin:6px 0 }

    .note{
      margin-top:14px; padding:12px; border-left:4px solid var(--orange);
      background: rgba(255,143,0,.1); color:#FFD9A3; border-radius:8px;
    }

    /* Tips */
    .tips{ display:grid; gap:10px; margin-top:8px }
    .tip{
      background: rgba(255,255,255,.04);
      border:1px dashed rgba(255,143,0,.45);
      padding:12px; border-radius:10px; color:#FFE4BF
    }
    .tips-actions{ margin-top:12px; display:flex; gap:10px }
    .btn-mini{
      padding:8px 12px; border-radius:10px; font-weight:700; border:1px solid rgba(255,255,255,.2);
      background:transparent; color:#fff; cursor:pointer
    }
    .btn-mini:hover{ border-color:#fff; background:rgba(255,255,255,.08) }

    /* Footer */
    footer{
      padding:24px; color:#A6B0BD; text-align:center; border-top:1px solid var(--card-br);
      background: linear-gradient(180deg, #0E1115, #0B0C0F);
    }
    .footer-links{ display:flex; gap:18px; justify-content:center; flex-wrap:wrap; margin-top:8px }
    .footer-links a{ color:#A6B0BD }
    .footer-links a:hover{ color:#FFC784 }
    
    /* Accesibilidad tipogrÃ¡fica en mÃ³vil */
    @media (max-width:480px){
      body{ font-size: 17px }
      .btn{ padding:14px 18px }
    }
  </style>
</head>

<body>
  <!-- TOPBAR -->
  <div class="topbar">
    <div class="brand-mini">
      <img src="assets/apple-touch-icon.png" alt="CUN" />
      <strong>CorporaciÃ³n Unificada Nacional</strong>
    </div>
  </div>

  <!-- HERO -->
  <header class="hero">
    <div class="container hero-grid">
      <div>
        <span class="kicker">ðŸ§“ Julia â€“ Asistente de PrÃ¡cticas</span>
        <h1>Julia â€“ tu guÃ­a para las prÃ¡cticas</h1>
        <p>Te acompaÃ±o con <strong>SGP</strong>, <strong>ARL</strong> y <strong>documentos</strong> â€” sin enredos.</p>
        <div class="micro" id="microstate" aria-live="polite">ðŸ’¬ Cargandoâ€¦</div>

        <div class="cta-row">
          <a class="btn" href="https://bienestaru.cun.edu.co/practicas/?utm_source=julia&utm_medium=hero_cta&utm_campaign=sgp" target="_blank" rel="noopener">Ir al SGP</a>
          <a class="btn btn-ghost" href="https://sites.google.com/cun.edu.co/practicascun/p%C3%A1gina-principal?utm_source=julia&utm_medium=hero_cta&utm_campaign=portal" target="_blank" rel="noopener">Portal de prÃ¡cticas</a>
          <button class="btn btn-ghost" id="btnChat">Hablar con Julia</button>
        </div>
      </div>

      <figure class="hero-figure">
        <img src="assets/web-app-manifest-512x512.png" alt="Julia, abuelita digital" />
      </figure>
    </div>
  </header>

  <!-- CONTENIDO -->
  <main class="container grid" aria-label="Contenido principal">
    <section class="card">
      <h2>Â¿QuÃ© puedes preguntarle?</h2>
      <ul>
        <li>Â¿CÃ³mo registro mi prÃ¡ctica en el SGP?</li>
        <li>Â¿QuÃ© documentos necesito segÃºn mi modalidad?</li>
        <li>Â¿CuÃ¡ndo debo subir la carta de finalizaciÃ³n?</li>
        <li>Â¿QuÃ© pasa si la empresa no tiene convenio?</li>
      </ul>
      <div class="note">Consejo: ten a la mano tu correo institucional; lo vas a necesitar para acceder a formatos y al SGP.</div>
    </section>

    <aside class="card" aria-label="Accesos">
      <h2>Accesos Ãºtiles</h2>
      <ul>
        <li><a href="https://bienestaru.cun.edu.co/practicas/?utm_source=julia&utm_medium=sidebar_link&utm_campaign=sgp" target="_blank" rel="noopener">Ingreso a SGP</a></li>
        <li><a href="https://sites.google.com/cun.edu.co/practicascun/p%C3%A1gina-principal?utm_source=julia&utm_medium=sidebar_link&utm_campaign=portal" target="_blank" rel="noopener">Portal de prÃ¡cticas (Google Sites)</a></li>
      </ul>
    </aside>

    <!-- TIPS DE JULIA (desde JSON) -->
    <section class="card" style="grid-column:1/-1" aria-label="Tips de Julia">
      <h2>Tips de Julia</h2>
      <div class="tips" id="tipsList"></div>
      <div class="tips-actions">
        <button class="btn-mini" id="tipsReload">Actualizar tips</button>
      </div>
    </section>
  </main>

  <!-- FOOTER -->
  <footer>
    <div>Â© 2025 CUN â€“ CoordinaciÃ³n de PrÃ¡cticas</div>
    <nav class="footer-links" aria-label="Enlaces de pie de pÃ¡gina">
      <a href="https://www.cun.edu.co/" target="_blank" rel="noopener">Sitio CUN</a>
      <a href="https://bienestaru.cun.edu.co/practicas/" target="_blank" rel="noopener">SGP</a>
      <a href="https://sites.google.com/cun.edu.co/practicascun/p%C3%A1gina-principal" target="_blank" rel="noopener">Portal de prÃ¡cticas</a>
    </nav>
  </footer>

  <!-- CHATBASE -->
  <script>
  (function(){
    if(!window.chatbase || window.chatbase("getState")!=="initialized"){
      window.chatbase=(...a)=>{(window.chatbase.q??=[]).push(a)};
      window.chatbase=new Proxy(window.chatbase,{get(t,p){if(p==="q"){return t.q}return(...a)=>t(p,...a)}});
    }
    const onLoad=function(){
      const s=document.createElement("script");
      s.src="https://www.chatbase.co/embed.min.js";
      s.id="sLDgiXlWpHYwWJV6DdWvp";  // tu ID
      s.domain="www.chatbase.co";
      document.body.appendChild(s);
    };
    if(document.readyState==="complete"){onLoad()} else {window.addEventListener("load",onLoad)}
  })();
  </script>

  <!-- ABRIR CHAT -->
  <script>
    (function () {
      const openChat = () => {
        try {
          if (window.chatbase && typeof window.chatbase === 'function') {
            try { window.chatbase('open'); return; } catch(e){}
            try { window.chatbase('toggle'); return; } catch(e){}
          }
        } catch (e) {}
        const clickBubble = () => {
          const b = document.querySelector('[class*="Chatbase"] button, .chatbase-bubble, [aria-label*="chat"], [class*="bubble"]');
          if (b) b.click();
        };
        clickBubble();
        setTimeout(clickBubble, 600);
      };
      document.getElementById('btnChat')?.addEventListener('click', openChat);
    })();
  </script>

  <!-- MICRO-ESTADO y TIPS desde JSON -->
  <script>
    // Utilidad: shuffle simple
    function shuffle(arr){ return arr.map(v=>[Math.random(),v]).sort((a,b)=>a[0]-b[0]).map(x=>x[1]); }

    // Cargar micro-mensajes desde assets/micro.json
    (async function loadMicro(){
      const el = document.getElementById('microstate');
      try{
        const res = await fetch('assets/micro.json?v=' + Date.now());
        const data = await res.json();
        const msgs = Array.isArray(data.messages) ? data.messages : ["ðŸ’¬ Julia estÃ¡ lista para conversarâ€¦"];
        const interval = Number(data.interval_ms||4200);
        let i=0;
        el.textContent = msgs[0] || "ðŸ’¬ Julia estÃ¡ lista para conversarâ€¦";
        setInterval(()=>{ i=(i+1)%msgs.length; el.textContent = msgs[i]; }, interval);
      }catch(e){
        el.textContent = "ðŸ’¬ Julia estÃ¡ lista para conversarâ€¦";
      }
    })();

    // Cargar tips desde assets/tips.json
    async function renderTips(){
      const list = document.getElementById('tipsList');
      list.innerHTML = "Cargandoâ€¦";
      try{
        const res = await fetch('assets/tips.json?v=' + Date.now());
        const data = await res.json();
        const all = Array.isArray(data.tips) ? data.tips : [];
        const sample = shuffle(all).slice(0,3);
        list.innerHTML = "";
        sample.forEach(t=>{
          const d=document.createElement('div');
          d.className='tip';
          d.textContent='ðŸ’¡ ' + t;
          list.appendChild(d);
        });
        if(sample.length===0){
          list.innerHTML = "<div class='tip'>ðŸ’¡ Agrega tips en <code>assets/tips.json</code>.</div>";
        }
      }catch(e){
        list.innerHTML = "<div class='tip'>No se pudieron cargar los tips. Revisa <code>assets/tips.json</code>.</div>";
      }
    }
    renderTips();
    document.getElementById('tipsReload')?.addEventListener('click', renderTips);
  </script>

  <!-- SW opcional -->
  <script>
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('sw.js');
      });
    }
  </script>
</body>
</html>
